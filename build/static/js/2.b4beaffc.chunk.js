webpackJsonp([2],{651:function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function s(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,a){function n(s,r){try{var i=t[s](r),o=i.value}catch(e){return void a(e)}if(!i.done)return Promise.resolve(o).then(function(e){n("next",e)},function(e){n("throw",e)});e(o)}return n("next")})}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=a(264),u=a.n(l),c=a(1),p=a.n(c),y=a(55),d=a(265),m=a.n(d),f=a(656),h=a.n(f),b=a(657),g=a.n(b),v=a(658),w=a.n(v),E=a(659),x=a(660),P=a.n(x),k=a(43),M=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),A=function(e){var t=e.color;return p.a.createElement("hr",{style:{color:t,backgroundColor:t,height:2}})},S={color:"#ff4130"},N={color:"black"},O={color:"black",fontStyle:"italic"},C={color:"red"},I={color:"white"},D=function(e){function t(e){var a;r(this,t);var s=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return s.createEscrow=s.createEscrow.bind(s),s.updatePrice=s.updatePrice.bind(s),s.handlePrivateEscrow=s.handlePrivateEscrow.bind(s),s.handleAllowOffers=s.handleAllowOffers.bind(s),s.handlePrivateBuyerAddress=s.handlePrivateBuyerAddress.bind(s),s.handlePaginate=s.handlePaginate.bind(s),s.handleNextLink=s.handleNextLink.bind(s),s.handlePreviousLink=s.handlePreviousLink.bind(s),s.dropDownSelected=s.dropDownSelected.bind(s),s.escrowAddress=E.a,s.LANDaddress=E.b,s.LANDProxyAddress=E.c,s.MANAaddress=E.d,s.state=(a={isConnected:!1,manaApproved:!1,paused:!1,landApproved:!1,createEscrowFormError:!1,escrowRedirect:!1,parcelOwner:!1,manaOwned:0,accountsChanged:!1,landOwned:0,currentPrice:0,escrowCreated:!1,publicationFee:0},n(a,"escrowCreated",!1),n(a,"parcelEscrow",!1),n(a,"redirect",!1),n(a,"parcelID",null),n(a,"escrowID",null),n(a,"escrowTransactionStatus","Idle"),n(a,"totalEscrowPrice",0),n(a,"parcelOffersAllowed",0),n(a,"showPrivateEscrow",0),n(a,"whitelisted",!1),n(a,"privateBuyerAddress","0x0"),n(a,"fetchedParcels",!1),n(a,"ownedParcelsArray",Array()),n(a,"selectedParcels",Array()),n(a,"displayParcelsArray",Array()),n(a,"currentParcelPage",1),n(a,"parcelsPerPage",8),n(a,"tempStateLand",null),n(a,"pageNumbers",0),n(a,"escrowView","Vertical"),n(a,"pageNumbersView",Array()),n(a,"tx","0x0"),n(a,"lands",[]),n(a,"loadingParcels",!0),n(a,"parcelIMG","https://via.placeholder.com/220x125"),a),s.x=e.match.params.x,s.y=e.match.params.y,s.account="1",s.parcelOwner="1",s.web3=null,s.metmaskWeb3=null,s.account="0x0",s.EscrowContractEvents=null,s.cacheLoaded=Array(),s}return o(t,e),M(t,[{key:"checkAccountValidation",value:function(){function e(){return t.apply(this,arguments)}var t=s(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="",e.next=3,this.web3.eth.getAccounts(function(e,a){t=a[0],console.log(t)});case 3:if(""!=t){e.next=8;break}return console.log("metamask account is null"),e.abrupt("return",!1);case 8:if(this.account!=t){e.next=13;break}return console.log("metamask account is the same"),e.abrupt("return",!0);case 13:return console.log("metamask has changed"),e.abrupt("return",!1);case 15:case"end":return e.stop()}},e,this)}));return e}()},{key:"createEscrow",value:function(){function e(e){return t.apply(this,arguments)}var t=s(u.a.mark(function e(t){var a,n,s,r,i,o,l,c=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(this.state),this.checkAccountValidation()){e.next=5;break}this.setState({accountsChanged:!0}),e.next=25;break;case 5:if(this.state.showPrivateEscrow!=this.acount&&0!=this.state.showPrivateEscrow&&0!=this.state.currentPrice&&0!=this.state.selectedParcels.length){e.next=9;break}this.setState({createEscrowFormError:!0}),e.next=25;break;case 9:for(a=this.web3.utils.toWei(this.state.currentPrice,"ether"),n=!1,n=1==this.state.parcelOffersAllowed,n=!1,s=!1,s=1!=this.state.showPrivateEscrow,r="0x0000000000000000000000000000000000000000",i="0x0000000000000000000000000000000000000000",1==this.state.showPrivateEscrow&&(r=this.state.privateBuyerAddress),console.log(this.web3.utils.toWei(this.state.publicationFee)),o=Array(),l=0;l<this.state.selectedParcels.length;l++)o.push(this.state.selectedParcels[l].id);return console.log(this.state.selectedParcels),console.log(o,this.state.currentPrice,n,s,r),e.next=25,this.ESCROWContract.methods.createNewEscrow(o,this.web3.utils.toWei(this.state.currentPrice,"ether"),n,s,r).send({from:this.account}).on("transactionHash",function(e){return c.setState({tx:e,escrowTransactionStatus:"Pending"})}).then(function(e){return c.setState({escrowID:e.events.EscrowCreated.returnValues[0],parcelEscrow:!0,escrowTransactionStatus:"Idle",escrowRedirect:!1,escrowCreated:!0})});case 25:case"end":return e.stop()}},e,this)}));return e}()},{key:"updatePrice",value:function(e){var t=null;if(this.state.whitelisted)var t=parseInt(e.target.value,10);else var t=parseInt(e.target.value,10)+parseInt(this.web3.utils.fromWei(this.state.publicationFee,"ether"),10);this.setState({currentPrice:e.target.value,createEscrowFormError:!1,totalEscrowPrice:t})}},{key:"handlePrivateBuyerAddress",value:function(e){this.setState({privateBuyerAddress:e.target.value,createEscrowFormError:!1})}},{key:"handlePrivateEscrow",value:function(e){console.log(e.target.value),"1"==e.target.value?this.setState({showPrivateEscrow:"1",createEscrowFormError:!1}):this.setState({showPrivateEscrow:"2",createEscrowFormError:!1})}},{key:"handleAllowOffers",value:function(e){this.setState({parcelOffersAllowed:e.target.value,createEscrowFormError:!1})}},{key:"handlePaginate",value:function(e){this.handlePageMove(e.target.id)}},{key:"handlePageMove",value:function(e){if(console.log(e),this.setState({loadingParcels:!0}),this.cacheLoaded[e])this.setState({currentParcelPage:Number(e),loadingParcels:!1});else{var t=this.state,a=t.ownedParcelsArray,n=t.parcelsPerPage,s=e*n,r=s-n;s>a.length&&(s=a.length,r=(e-1)*n+1),this.fetchDisplayData(a,r,s,e)}}},{key:"handleNextLink",value:function(e){if(console.log(this.state.pageNumbersView),this.state.pageNumbers>this.state.pageNumbersView[this.state.pageNumbersView.length-1]){var t=Array();t=this.state.pageNumbersView.slice(1),t.push(this.state.pageNumbersView[this.state.pageNumbersView.length-1]+1),this.setState({pageNumbersView:t})}}},{key:"handlePreviousLink",value:function(e){if(this.state.pageNumbersView[0]>1){var t=Array();t=this.state.pageNumbersView.slice(0,this.state.pageNumbersView.length-1),t.unshift(this.state.pageNumbersView[0]-1),this.setState({pageNumbersView:t})}}},{key:"dropDownSelected",value:function(e){console.log(e.target.value);for(var t=this.getIndex(e.target.value,this.state.ownedParcelsArray,"xy"),a=1;a<=this.state.pageNumbers;a++)if(t+1<=a*this.state.parcelsPerPage){console.log("Parcel is on Page "+a),this.state.currentParcelPage!=a&&this.handlePageMove(a);break}}},{key:"getIndex",value:function(e,t,a){for(var n=0;n<t.length;n++)if(t[n][a]===e)return n;return-1}}]),M(t,[{key:"loadWeb3Provder",value:function(){function e(){return t.apply(this,arguments)}var t=s(u.a.mark(function e(){var t,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.web3=new m.a(m.a.givenProvider),this.metmaskWeb3=new m.a(new m.a.providers.WebsocketProvider("wss://ropsten.infura.io/ws")),null==this.web3&&this.setState({loadingStatement:"Please enable a web3 browser"}),t="",e.next=6,this.web3.eth.getAccounts(function(e,a){t=a[0],console.log(t)});case 6:if(""!=t){e.next=10;break}this.setState({loadingStatement:"Please sign in to Metamask"}),e.next=19;break;case 10:if(this.account=t,null==this.account){e.next=19;break}return this.MANAContract=new this.web3.eth.Contract(h.a,this.MANAaddress),this.LANDContract=new this.web3.eth.Contract(g.a,this.LANDProxyAddress),this.ESCROWContract=new this.web3.eth.Contract(w.a,this.escrowAddress),a=!1,e.next=18,this.ESCROWContract.methods.paused().call(function(e,t){a=t});case 18:a?this.setState({paused:!0}):this.checkApprovals();case 19:case"end":return e.stop()}},e,this)}));return e}()},{key:"checkApprovals",value:function(){function e(){return t.apply(this,arguments)}var t=s(u.a.mark(function e(){var t,a,n,s,r,i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=0,a=0,e.next=4,this.MANAContract.methods.allowance(this.account,this.escrowAddress).call(function(e,a){t=a});case 4:if(!(t>0)){e.next=10;break}return e.next=7,this.MANAContract.methods.balanceOf(this.account).call(function(e,t){a=t});case 7:a=this.web3.utils.fromWei(a,"ether"),e.next=11;break;case 10:this.setState({redirect:!0});case 11:return n=0,s=0,e.next=15,this.LANDContract.methods.isApprovedForAll(this.account,this.escrowAddress).call(function(e,t){n=t});case 15:if(r=0,i=!1,!(n>0)){e.next=27;break}return e.next=20,this.LANDContract.methods.balanceOf(this.account).call(function(e,t){s=t});case 20:return e.next=22,this.ESCROWContract.methods.publicationFeeInWei().call(function(e,t){r=t});case 22:return e.next=24,this.ESCROWContract.methods.whitelistAddresses(this.account).call(function(e,t){i=t});case 24:e.next=28;break;case 27:this.setState({redirect:!0});case 28:console.log(i),this.setState({landApproved:!0,whitelisted:i,landOwned:s,manaApproved:!0,manaOwned:a,isConnected:!0,publicationFee:r});case 30:case"end":return e.stop()}},e,this)}));return e}()},{key:"showPrivateEscrow",value:function(){return"1"==this.state.showPrivateEscrow?p.a.createElement("div",null,p.a.createElement(k.s,null,p.a.createElement(k.h,{lg:"12"},p.a.createElement("h5",{className:"display-6",style:N},"Please enter private buyer's wallet address below")),"      ",p.a.createElement("div",{className:"chart-wrapper mx-3",style:{height:"10px"}}),p.a.createElement(k.h,{lg:"12"},p.a.createElement(k.l,{type:"text",id:"privateEscrowBuyerId",onChange:this.handlePrivateBuyerAddress,placeholder:"Enter Buyer's Address",required:!0}),p.a.createElement("div",{style:O},"Private escrow can only be accessed by the buyer you enter below")))):null}},{key:"checkEscrowFormErrors",value:function(){if(this.state.createEscrowFormError)return p.a.createElement("div",null,p.a.createElement("div",{className:"chart-wrapper mx-3",style:{height:"40px"}}),p.a.createElement("div",{className:"alert alert-danger fade show",role:"alert"},"Please fill out entire escrow form"))}},{key:"getParcels",value:function(){function e(){return t.apply(this,arguments)}var t=s(u.a.mark(function e(){var t,a,n,s,r,i,o,l,c,p,y,d,m,f,h,b;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,a=Array(),n=Array(),s=0,this.setState({fetchedParcels:!0}),e.next=7,this.LANDContract.methods.landOf(this.account).call(function(e,a){console.log("land:["+JSON.stringify(a)+"]"),t=a});case 7:console.log(n),r=Array(),i=0;case 10:if(!(i<t[0].length)){e.next=23;break}return o=null,l=null,c=null,p=null,y=null,e.next=18,fetch("https://api.decentraland.org/v1/parcels/"+t[0][i]+"/"+t[1][i]).then(function(e){return e.json()}).then(function(e){console.log(e.data),e.data.tags&&(o=e.data.tags)});case 18:o.proximity&&(console.log(o.proximity),o.proximity.road&&(l=o.proximity.road.distance,console.log(l)),o.proximity.district&&(c=o.proximity.district.distance,console.log(c)),o.proximity.plaza&&(p=o.proximity.plaza.distance,console.log(p))),a.push({id:i,x:t[0][i],y:t[1][i],xy:t[0][i]+","+t[1][i],style:"",selectedPosition:0,onSale:!1,onEscrow:!1,road:l,district:c,plaza:p});case 20:i++,e.next=10;break;case 23:for(console.log(a),d=[],m=10,Math.ceil(t[0].length/this.state.parcelsPerPage)<10&&(m=Math.ceil(t[0].length/this.state.parcelsPerPage)),f=1;f<=m;f++)d.push(f);for(h=0,b=1;b<=Math.ceil(t[0].length/this.state.parcelsPerPage);b++)h+=1;if(this.setState({pageNumbersView:d,pageNumbers:h}),!(a.length>8)){e.next=36;break}console.log("more than 8, only fetch first 8"),this.fetchDisplayData(a,0,8,1),e.next=39;break;case 36:return console.log("only less than 8"),e.next=39,this.fetchDisplayData(a,0,a.length,1);case 39:case"end":return e.stop()}},e,this)}));return e}()},{key:"fetchDisplayData",value:function(){function e(e,a,n,s){return t.apply(this,arguments)}var t=s(u.a.mark(function e(t,a,n,s){var r,i,o,l,c;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=0,i=t,o=Array(),e.next=5,this.ESCROWContract.methods.getAllOwnedParcelsOnEscrow(this.account).call(function(e,t){r=t});case 5:console.log(r),l=0;case 7:if(!(l<r)){e.next=13;break}return e.next=10,this.ESCROWContract.methods.getParcelAssetIdOnEscrow(this.account,l).call(function(e,t){o.push(t)});case 10:l++,e.next=7;break;case 13:case 14:if(!(a<n)){e.next=24;break}return c=null,e.next=18,this.LANDContract.methods.encodeTokenId(t[a].x,t[a].y).call(function(e,t){c=t});case 18:i[a].id=c,i[a].onSale=!1,i[a].onEscrow=this.checkParcelIsOpenEscrow(o,c);case 21:a++,e.next=14;break;case 24:this.cacheLoaded[s]=!0,console.log(i),this.setState({fetchedParcels:!0,ownedParcelsArray:i,loadingParcels:!1,currentParcelPage:Number(s)});case 27:case"end":return e.stop()}},e,this)}));return e}()},{key:"checkParcelOnSale",value:function(){function e(e){return t.apply(this,arguments)}var t=s(u.a.mark(function e(t){var a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t,a=null,e.next=4,fetch("https://api.decentraland.org/v1/parcels/"+t.x+"/"+t.y).then(function(e){return e.json()}).then(function(e){a=e.data});case 4:if(console.log(t),console.log(a.publication),null!=a.publication){e.next=8;break}return e.abrupt("return",!1);case 8:if("open"!=a.publication.status){e.next=12;break}return e.abrupt("return",!0);case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}},e,this)}));return e}()},{key:"checkParcelIsOpenEscrow",value:function(e,t){return e.some(function(e){return t===e})}},{key:"componentDidUpdate",value:function(){if(this.state.isConnected&&(!this.state.manaApproved||!this.state.landApproved))return p.a.createElement(y.d,{to:"/settings"});this.state.fetchedParcels||this.getParcels()}},{key:"toggleParcel",value:function(e,t,a,n){if(console.log(e),!a&&!n){console.log(e+","+t);var s=this.state.ownedParcelsArray,r=this.state.selectedParcels,i=this.getIndex(e,this.state.ownedParcelsArray,"xy");if(""==s[i].style)s[i].style="card-highlight card",r.push(s[i]),console.log(r),console.log(s);else{s[i].style="";var o=this.getIndex(e,r,"xy");r.splice(o,1)}console.log(r),this.setState({ownedParcelsArray:s,selectedParcels:r,createEscrowFormError:!1})}}},{key:"parcelSelected",value:function(e,t,a,n){this.toggleParcel(e,t,a,n)}},{key:"getAvailabilityCheck",value:function(e){return e.onSale?e.onEscrow?p.a.createElement("div",null,p.a.createElement("div",{align:"left"},p.a.createElement("i",{className:"fa fa-exclamation-circle red fa-lg mt-4",style:C}),p.a.createElement("a",{href:"https://market.decentraland.org/parcels/"+e.x+"/"+e.y+"/detail",target:"blank",className:"display-6"}," Cancel Marketplace Sale")),p.a.createElement("div",{align:"left"},p.a.createElement("i",{className:"fa fa-exclamation-circle red fa-lg mt-4",style:C}),p.a.createElement("span",{class:"display-6",style:C}," Parcel in Escrow"))):p.a.createElement("div",null,p.a.createElement("div",{align:"left"},p.a.createElement("i",{className:"fa fa-exclamation-circle red fa-lg mt-4",style:C}),p.a.createElement("a",{href:"https://market.decentraland.org/parcels/"+e.x+"/"+e.y+"/detail",target:"blank",className:"display-6"}," Cancel Marketplace Sale")),p.a.createElement("div",{style:{height:"15px"}})):e.onEscrow?p.a.createElement("div",null,p.a.createElement("div",{align:"left"},p.a.createElement("i",{className:"fa fa-exclamation-circle red fa-lg mt-4",style:C}),p.a.createElement("span",{className:"display-6",style:C}," Parcel in escrow")),p.a.createElement("div",{style:{height:"15px"}})):p.a.createElement("div",{style:{height:"35px"}})}},{key:"getNoEscrowOverlay",value:function(e,t){return null}},{key:"getParcelsDropdown",value:function(){return this.state.ownedParcelsArray.map(function(e,t){return p.a.createElement("option",{value:e.xy,key:e.xy},"Parcel ",e.x,",",e.y)})}},{key:"getHighlight",value:function(e,t){if(null!=e){var a=null;return a=1==e?e+" Parcel away":0==e?"Adjacent":e+" Parcels away",p.a.createElement(k.s,null,p.a.createElement(k.h,{lg:"12"},p.a.createElement("div",{style:I},t,": ",a)))}}},{key:"getHighlights",value:function(e){return p.a.createElement("div",null,this.getHighlight(e.road,"Road"),this.getHighlight(e.district,"District"),this.getHighlight(e.plaza,"Plaza"))}},{key:"getOwnedParcels",value:function(){var e=this;if(this.state.loadingParcels)return p.a.createElement(k.h,{align:"center"},p.a.createElement("div",null,p.a.createElement("img",{src:a(654)})),p.a.createElement("div",null,p.a.createElement("h4",null,"Loading Parcels...")));var t=this.state,n=t.ownedParcelsArray,s=t.currentParcelPage,r=t.parcelsPerPage,i=s*r,o=i-r;i>n.length&&(i=n.length,o=(s-1)*r);var l=n.slice(o,i);return console.log(o),l.map(function(t,a){return p.a.createElement(k.h,{lg:"6",sm:"6",key:t.xy,onClick:function(){return e.parcelSelected(t.xy,t.id,t.onSale,t.onEscrow)}},e.getNoEscrowOverlay(t.onSale,t.onEscrow),p.a.createElement(k.e,{style:{background:"black"},className:t.style},p.a.createElement("div",null,p.a.createElement("img",{src:"https://api.decentraland.org/v1/parcels/"+t.x+"/"+t.y+"/map.png?height=200&width=300&size=10&publications=true",style:{width:"100%"}})),p.a.createElement("div",{style:{padding:"10px"}},p.a.createElement("h5",{style:S},"Parcel ",t.x,",",t.y," ",p.a.createElement("small",null," ",p.a.createElement("a",{href:"https://market.decentraland.org/parcels/"+t.x+"/"+t.y+"/detail",target:"blank"},"View")))),p.a.createElement("div",{style:{padding:"10px"}},e.getHighlights(t)),p.a.createElement("div",{style:{padding:"10px"}},e.getAvailabilityCheck(t))))})}},{key:"getItemizedEscrow",value:function(){return p.a.createElement("table",null,p.a.createElement("tbody",null,this.state.selectedParcels.map(function(e,t){return p.a.createElement("tr",{key:e.id},p.a.createElement("td",null,p.a.createElement("h6",{style:S},"Parcel ",e.x,",",e.y)))})))}},{key:"componentDidMount",value:function(){this.loadWeb3Provder()}},{key:"getLoadingView",value:function(){return p.a.createElement("div",{className:"animated fadeIn"},p.a.createElement("div",{style:{height:"25px"}}),p.a.createElement(k.s,null,p.a.createElement(k.h,{xs:"12",sm:"12",lg:"12"},this.state.loadingStatement)))}},{key:"getEscrowPendingView",value:function(){return p.a.createElement("div",{className:"animated fadeIn"},p.a.createElement("div",{style:{height:"25px"}}),p.a.createElement(k.s,null,p.a.createElement(k.h,{xs:"12",sm:"12",lg:"12",align:"center"},p.a.createElement("h3",{className:"display-4"},"Your Escrow ",p.a.createElement("a",{href:"http://ropsten.etherscan.io/tx/"+this.state.tx,target:"blank"},"transaction")," is pending..."),p.a.createElement("div",null,p.a.createElement("img",{src:a(654)})))),p.a.createElement("div",{style:{height:"25px"}}))}},{key:"getAccountsChangedView",value:function(){return p.a.createElement("div",{className:"animated fadeIn"},p.a.createElement("div",{style:{height:"25px"}}),p.a.createElement(k.s,null,p.a.createElement(k.h,{xs:"12",sm:"12",lg:"12",align:"center"},p.a.createElement("h3",{className:"display-4"},"Your Metamask account changed, please refresh"))),p.a.createElement("div",{style:{height:"25px"}}))}},{key:"getEscrowSellerView",value:function(){return p.a.createElement("div",{className:"animated fadeIn"},p.a.createElement("div",{style:{height:"25px"}}),p.a.createElement(k.s,null,p.a.createElement(k.h,{xs:"12",sm:"12",lg:"12",align:"center"},p.a.createElement(k.e,null,p.a.createElement(k.f,null,p.a.createElement(k.s,null,p.a.createElement(k.h,{lg:"12",align:"center"},p.a.createElement("h3",{className:"display-4"},"You are the seller of this parcel"),p.a.createElement("div",{className:"chart-wrapper",style:{height:"40px"}}))))))))}},{key:"getActivePage",value:function(e){if(e==this.state.currentParcelPage)return" active"}},{key:"getEscrowInstructions",value:function(){return p.a.createElement("div",null,p.a.createElement("h1",{className:"display-4",style:N},"Start Escrow"),p.a.createElement("div",{className:"chart-wrapper mx-3",style:{height:"20px"}}),p.a.createElement("p",{style:N},"1) Your LAND tokens will remain in your wallet until a buyer accepts your escrow."),p.a.createElement("p",{style:N},"2) You will not be able to place these parcels in other escrows. DCL Escrow does not hold MANA or LAND on your behalf. The transfer will occur when a buyer accepts your escrow."),p.a.createElement("div",null,p.a.createElement("div",{className:"chart-wrapper mx-3",style:{height:"40px"}})))}},{key:"getEscrowForm",value:function(){return p.a.createElement("div",null,p.a.createElement(k.k,null,p.a.createElement(k.s,null,p.a.createElement(k.h,null,p.a.createElement("div",null,p.a.createElement(k.s,null,p.a.createElement(k.h,{lg:"6"},p.a.createElement("h3",{className:"display-6",style:N},"Escrow Price")),p.a.createElement(k.h,{lg:"6"},p.a.createElement(k.l,{type:"text",id:"escrowPrice",onChange:this.updatePrice,placeholder:"Enter escrow price in MANA",required:!0}))),p.a.createElement("div",{className:"chart-wrapper mx-3",style:{height:"40px"}}),p.a.createElement(k.s,null,p.a.createElement(k.h,{lg:"6"},p.a.createElement("h4",{className:"display-6",style:N},"Private Escrow?")),p.a.createElement(k.h,{lg:"6"},p.a.createElement("select",{name:"select",id:"select",className:"form-control",onChange:this.handlePrivateEscrow},p.a.createElement("option",{value:"0"},"Please select"),p.a.createElement("option",{value:"1"},"Yes"),p.a.createElement("option",{value:"2"},"No")))),p.a.createElement("div",{className:"chart-wrapper mx-3",style:{height:"20px"}}),this.showPrivateEscrow())))),p.a.createElement("div",{className:"chart-wrapper",style:{height:"10px"}}))}},{key:"checkWhitelist",value:function(){return this.state.whitelisted?p.a.createElement("div",{style:O},"Congrats! You're on the whitelist. You will never be charged for escrow fees."):p.a.createElement("div",{style:O},"*** Escrow fees are ",this.web3.utils.fromWei(this.state.publicationFee,"ether")," MANA. You will be charged if your escrow gets completed.")}},{key:"getEscrowSubtotal",value:function(){return p.a.createElement("div",null,p.a.createElement(k.s,null,p.a.createElement(k.h,{lg:"12"},p.a.createElement("h5",{style:N},"Itemized Escrow Statement"),p.a.createElement(A,{color:"black"}),this.getItemizedEscrow(),p.a.createElement(A,{color:"black"}),p.a.createElement("div",null,p.a.createElement("h6",{style:N},"Total Parcels: ",this.state.selectedParcels.length)),p.a.createElement("div",null,p.a.createElement("h6",{style:N},"Total Estates: 0 ")),p.a.createElement("div",null,p.a.createElement("h4",{style:S},"Escrow Total : ",p.a.createElement(P.a,{value:this.state.totalEscrowPrice,displayType:"text",thousandSeparator:!0})," MANA")),this.checkWhitelist())),p.a.createElement("div",{className:"chart-wrapper",style:{height:"40px"}}),p.a.createElement(k.s,null,p.a.createElement(k.h,{lg:"12"},this.checkEscrowFormErrors(),p.a.createElement("button",{className:"btn btn-primary btn-lg btn-block",onClick:this.createEscrow},"Open Escrow"))))}},{key:"getPreviousPageLink",value:function(e){return e>9?p.a.createElement(k.r,{previous:!0,onClick:this.handlePreviousLink}):null}},{key:"getNexPageLink",value:function(e){return e>9?p.a.createElement(k.r,{next:!0,onClick:this.handleNextLink}):null}},{key:"getCreateEscrowView",value:function(){var e=this;console.log("create escrow viwew");var t=this.state.pageNumbers;return p.a.createElement("div",{className:"animated fadeIn"},p.a.createElement("div",{style:{height:"25px"}}),p.a.createElement(k.s,null,p.a.createElement(k.h,{lg:"6"},p.a.createElement(k.e,{className:"text-white bg-gray-100"},p.a.createElement(k.f,{className:"pb-0"},this.getEscrowInstructions(),this.getEscrowForm(),this.getEscrowSubtotal()),p.a.createElement("div",{className:"chart-wrapper mx-3",style:{height:"40px"}}))),p.a.createElement(k.h,{lg:"6"},p.a.createElement(k.s,null,p.a.createElement(k.h,{lg:"12"},p.a.createElement("h3",{style:N},"Your Parcels (",this.state.landOwned,")")),p.a.createElement(k.h,{lg:"12"},p.a.createElement(k.p,null,p.a.createElement(k.q,null,this.getPreviousPageLink(t)),this.state.pageNumbersView.map(function(a){Math.ceil(t.length/7);return a==e.state.currentParcelPage?p.a.createElement(k.q,{key:a,active:!0},p.a.createElement(k.r,{tag:"button",id:a,onClick:e.handlePaginate},a)):p.a.createElement(k.q,{key:a},p.a.createElement(k.r,{tag:"button",id:a,onClick:e.handlePaginate},a))}),this.getNexPageLink(t))),p.a.createElement(k.h,{lg:"12"},p.a.createElement(k.k,null,p.a.createElement(k.l,{type:"select",name:"parcelDropdown",id:"parcelDropdown",onChange:this.dropDownSelected},this.getParcelsDropdown())))),p.a.createElement(k.s,null,p.a.createElement(k.h,{lg:"12"},p.a.createElement(A,{color:"black"}))),p.a.createElement(k.s,null,p.a.createElement(k.h,{lg:"12"},p.a.createElement(k.s,null,this.getOwnedParcels()))))))}},{key:"getEscrowCreatedView",value:function(){return p.a.createElement("div",{className:"animated fadeIn"},p.a.createElement("div",{style:{height:"25px"}}),p.a.createElement(k.s,null,p.a.createElement(k.h,{lg:"12",align:"center"},p.a.createElement(k.e,null,p.a.createElement(k.f,null,p.a.createElement("div",null,p.a.createElement("h4",{style:N,className:"display-4"},"Escrow Created!")),p.a.createElement("div",{className:"chart-wrapper",style:{height:"40px"}}),p.a.createElement("div",{className:"display-5"},p.a.createElement("strong",null,"Copy and paste the below Escrow ID so others can access the Escrow")),p.a.createElement("div",{className:"chart-wrapper",style:{height:"20px"}}),p.a.createElement("div",{className:"display-6"},this.state.escrowID),p.a.createElement("div",{className:"chart-wrapper",style:{height:"40px"}}),p.a.createElement("div",{className:"display-6"},p.a.createElement(y.b,{to:"/escrows/"+this.state.escrowID},p.a.createElement("h6",{className:"display-6"},"View your escrow"))))))))}},{key:"getPausedView",value:function(){return p.a.createElement("div",{className:"animated fadeIn"},p.a.createElement("div",{style:{height:"25px"}}),p.a.createElement(k.s,null,p.a.createElement(k.h,{xs:"12",sm:"12",lg:"12",align:"center"},p.a.createElement("h3",{className:"display-4"},"DCL Escrow under maintenance..."))),p.a.createElement("div",{style:{height:"25px"}}))}},{key:"render",value:function(){return this.state.escrowRedirect?p.a.createElement(y.d,{to:"/escrows/"+this.state.escrowID}):this.state.accountsChanged?p.a.createElement("div",null,this.getAccountsChangedView()):this.state.paused?p.a.createElement("div",null,this.getPausedView()):this.state.isConnected?this.state.escrowCreated?p.a.createElement("div",null,this.getEscrowCreatedView()):"Pending"==this.state.escrowTransactionStatus?p.a.createElement("div",null,this.getEscrowPendingView()):this.state.manaApproved&&this.state.landApproved?this.state.redirect?p.a.createElement(y.d,{to:"/settings"}):this.state.parcelEscrow?p.a.createElement("div",null,this.getEscrowSellerView()):p.a.createElement("div",null,this.getCreateEscrowView()):p.a.createElement(y.d,{to:"/settings"}):p.a.createElement("div",null,this.getLoadingView())}}]),t}(c.Component);t.default=D},654:function(e,t,a){e.exports=a.p+"static/media/transactionpending.c2a023cb.gif"},656:function(e,t){e.exports=[{constant:!0,inputs:[],name:"mintingFinished",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"unpause",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_amount",type:"uint256"}],name:"mint",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_value",type:"uint256"}],name:"burn",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"paused",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"finishMinting",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"pause",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"owner",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"remaining",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{anonymous:!1,inputs:[{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"amount",type:"uint256"}],name:"Mint",type:"event"},{anonymous:!1,inputs:[],name:"MintFinished",type:"event"},{anonymous:!1,inputs:[],name:"Pause",type:"event"},{anonymous:!1,inputs:[],name:"Unpause",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"burner",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Burn",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"}]},657:function(e,t){e.exports=[{constant:!0,inputs:[{name:"_interfaceID",type:"bytes4"}],name:"supportsInterface",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"proxyOwner",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"assetId",type:"uint256"}],name:"getApproved",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"operator",type:"address"},{name:"assetId",type:"uint256"}],name:"approve",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"x",type:"int256"},{name:"y",type:"int256"}],name:"ownerOfLand",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"user",type:"address"}],name:"setLatestToNow",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"x",type:"int256"},{name:"y",type:"int256"},{name:"beneficiary",type:"address"}],name:"assignNewParcel",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"x",type:"int256[]"},{name:"y",type:"int256[]"}],name:"ownerOfLandMany",outputs:[{name:"",type:"address[]"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"address"}],name:"latestPing",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"x",type:"int256[]"},{name:"y",type:"int256[]"},{name:"data",type:"string"}],name:"updateManyLandData",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"assetId",type:"uint256"}],name:"transferFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"operator",type:"address"},{name:"assetId",type:"uint256"}],name:"isAuthorized",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"address"}],name:"authorizedDeploy",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"owner",type:"address"},{name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{name:"assetId",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"pure",type:"function"},{constant:!1,inputs:[{name:"beneficiary",type:"address"}],name:"authorizeDeploy",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"x",type:"int256"},{name:"y",type:"int256"},{name:"to",type:"address"}],name:"transferLand",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"assetId",type:"uint256"}],name:"safeTransferFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"",type:"bytes"}],name:"initialize",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"x",type:"int256"},{name:"y",type:"int256"}],name:"landData",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"x",type:"int256[]"},{name:"y",type:"int256[]"},{name:"to",type:"address"}],name:"transferManyLand",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"assetId",type:"uint256"}],name:"exists",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"owner",type:"address"}],name:"tokensOf",outputs:[{name:"",type:"uint256[]"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"ping",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"assetId",type:"uint256"}],name:"ownerOf",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"GET_METADATA",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"operator",type:"address"},{name:"assetId",type:"uint256"}],name:"isUpdateAuthorized",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"assetId",type:"uint256"}],name:"tokenMetadata",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"x",type:"int256"},{name:"y",type:"int256"}],name:"encodeTokenId",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"pure",type:"function"},{constant:!0,inputs:[{name:"owner",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"currentContract",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"description",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"value",type:"uint256"}],name:"decodeTokenId",outputs:[{name:"",type:"int256"},{name:"",type:"int256"}],payable:!1,stateMutability:"pure",type:"function"},{constant:!1,inputs:[{name:"x",type:"int256[]"},{name:"y",type:"int256[]"},{name:"beneficiary",type:"address"}],name:"assignMultipleParcels",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"x",type:"int256[]"},{name:"y",type:"int256[]"},{name:"beneficiary",type:"address"},{name:"metadata",type:"string"}],name:"createEstateWithMetadata",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"owner",type:"address"}],name:"landOf",outputs:[{name:"",type:"int256[]"},{name:"",type:"int256[]"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"owner",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"registry",type:"address"}],name:"setEstateRegistry",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"updateOperator",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"operator",type:"address"},{name:"authorized",type:"bool"}],name:"setApprovalForAll",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"x",type:"int256"},{name:"y",type:"int256"}],name:"exists",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"assetId",type:"uint256"},{name:"operator",type:"address"}],name:"setUpdateOperator",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"assetId",type:"uint256"},{name:"userData",type:"bytes"}],name:"safeTransferFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"x",type:"int256[]"},{name:"y",type:"int256[]"},{name:"beneficiary",type:"address"}],name:"createEstate",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"x",type:"int256"},{name:"y",type:"int256"},{name:"data",type:"string"}],name:"updateLandData",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"estateRegistry",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"assetHolder",type:"address"},{name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"assetId",type:"uint256"}],name:"getApprovedAddress",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_newOwner",type:"address"}],name:"transferOwnership",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"x",type:"int256[]"},{name:"y",type:"int256[]"},{name:"estateId",type:"uint256"}],name:"transferManyLandToEstate",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"x",type:"int256"},{name:"y",type:"int256"},{name:"estateId",type:"uint256"}],name:"transferLandToEstate",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"beneficiary",type:"address"}],name:"forbidDeploy",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{anonymous:!1,inputs:[{indexed:!0,name:"registry",type:"address"}],name:"EstateRegistrySet",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"assetId",type:"uint256"},{indexed:!0,name:"holder",type:"address"},{indexed:!0,name:"operator",type:"address"},{indexed:!1,name:"data",type:"string"}],name:"Update",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"assetId",type:"uint256"},{indexed:!0,name:"operator",type:"address"}],name:"UpdateOperator",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!0,name:"assetId",type:"uint256"},{indexed:!1,name:"operator",type:"address"},{indexed:!1,name:"userData",type:"bytes"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!0,name:"assetId",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"operator",type:"address"},{indexed:!0,name:"holder",type:"address"},{indexed:!1,name:"authorized",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"operator",type:"address"},{indexed:!0,name:"assetId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"_prevOwner",type:"address"},{indexed:!1,name:"_newOwner",type:"address"}],name:"OwnerUpdate",type:"event"}]},658:function(e,t){e.exports=[{constant:!1,inputs:[{name:"escrowId",type:"bytes32"}],name:"acceptEscrow",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"toWhitelist",type:"address"}],name:"addAddressWhitelist",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"escrowId",type:"bytes32"}],name:"adminRemoveEscrow",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"cancelAllEscrows",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"assedIds",type:"uint256[]"},{name:"escrowPrice",type:"uint256"},{name:"doesAcceptOffers",type:"bool"},{name:"isPublic",type:"bool"},{name:"buyer",type:"address"}],name:"createNewEscrow",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"destroy",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_recipient",type:"address"}],name:"destroyAndSend",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"pause",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"escrowId",type:"bytes32"},{name:"offerPrice",type:"uint256"}],name:"placeOffer",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"escrowId",type:"bytes32"}],name:"removeEscrow",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"publicationFee",type:"uint256"}],name:"setPublicationFee",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"unpause",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_acceptedToken",type:"address"},{name:"_nonFungibleRegistry",type:"address"}],name:"updateEscrow",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{inputs:[{name:"_acceptedToken",type:"address"},{name:"_nonFungibleRegistry",type:"address"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,name:"id",type:"bytes32"},{indexed:!0,name:"seller",type:"address"},{indexed:!0,name:"buyer",type:"address"},{indexed:!1,name:"priceInWei",type:"uint256"},{indexed:!1,name:"acceptsOffers",type:"bool"},{indexed:!1,name:"publicE",type:"bool"},{indexed:!1,name:"parcels",type:"uint256"}],name:"EscrowCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"id",type:"bytes32"},{indexed:!0,name:"seller",type:"address"},{indexed:!1,name:"totalPrice",type:"uint256"},{indexed:!0,name:"winner",type:"address"}],name:"EscrowSuccessful",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"id",type:"bytes32"},{indexed:!0,name:"seller",type:"address"}],name:"EscrowCancelled",type:"event"},{anonymous:!1,inputs:[],name:"Pause",type:"event"},{anonymous:!1,inputs:[],name:"Unpause",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"previousOwner",type:"address"},{indexed:!0,name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{constant:!0,inputs:[],name:"acceptedToken",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"allEscrowIds",outputs:[{name:"",type:"bytes32"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"address"},{name:"",type:"uint256"}],name:"allOwnerParcelsOnEscrow",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"bytes32"},{name:"",type:"uint256"}],name:"assetIdByEscrowId",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"escrowByAssetId",outputs:[{name:"id",type:"bytes32"},{name:"seller",type:"address"},{name:"buyer",type:"address"},{name:"price",type:"uint256"},{name:"offer",type:"uint256"},{name:"acceptsOffers",type:"bool"},{name:"publicE",type:"bool"},{name:"escrowByOwnerIdPos",type:"uint256"},{name:"parcelCount",type:"uint256"},{name:"highestBidder",type:"address"},{name:"lastOfferPrice",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"bytes32"}],name:"escrowByEscrowId",outputs:[{name:"id",type:"bytes32"},{name:"seller",type:"address"},{name:"buyer",type:"address"},{name:"price",type:"uint256"},{name:"offer",type:"uint256"},{name:"acceptsOffers",type:"bool"},{name:"publicE",type:"bool"},{name:"escrowByOwnerIdPos",type:"uint256"},{name:"parcelCount",type:"uint256"},{name:"highestBidder",type:"address"},{name:"lastOfferPrice",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"address"},{name:"",type:"uint256"}],name:"escrowByOwnerId",outputs:[{name:"id",type:"bytes32"},{name:"seller",type:"address"},{name:"buyer",type:"address"},{name:"price",type:"uint256"},{name:"offer",type:"uint256"},{name:"acceptsOffers",type:"bool"},{name:"publicE",type:"bool"},{name:"escrowByOwnerIdPos",type:"uint256"},{name:"parcelCount",type:"uint256"},{name:"highestBidder",type:"address"},{name:"lastOfferPrice",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"ownerAddress",type:"address"}],name:"getAllOwnedParcelsOnEscrow",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"escrowId",type:"bytes32"}],name:"getAssetByEscrowIdLength",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"ownerAddress",type:"address"}],name:"getEscrowCountByAssetIdArray",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"ownerAddress",type:"address"}],name:"getEscrowCountById",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"ownerAddress",type:"address"},{name:"index",type:"uint256"}],name:"getEscrowInfo",outputs:[{name:"",type:"bytes32"},{name:"",type:"address"},{name:"",type:"address"},{name:"",type:"uint256"},{name:"",type:"uint256"},{name:"",type:"bool"},{name:"",type:"bool"},{name:"",type:"uint256"},{name:"",type:"uint256"},{name:"",type:"address"},{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"ownerAddress",type:"address"},{name:"index",type:"uint256"}],name:"getParcelAssetIdOnEscrow",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getPublicationFeeTotal",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"escrowId",type:"bytes32"},{name:"index",type:"uint256"}],name:"getSingleAssetByEscrowIdLength",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"index",type:"bytes32"}],name:"getSingleEscrowAdmin",outputs:[{name:"",type:"bytes32"},{name:"",type:"address"},{name:"",type:"address"},{name:"",type:"uint256"},{name:"",type:"uint256"},{name:"",type:"bool"},{name:"",type:"bool"},{name:"",type:"uint256"},{name:"",type:"uint256"},{name:"",type:"address"},{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getTotalEscrowCount",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"nonFungibleRegistry",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"bytes32"}],name:"offersByEscrowId",outputs:[{name:"highestOffer",type:"address"},{name:"highestOfferPrice",type:"uint256"},{name:"previousOffer",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"address"}],name:"openedEscrowsByOwnerId",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"owner",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"address"}],name:"ownerEscrowsCounter",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"paused",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"publicationFeeInWei",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"address"}],name:"whitelistAddresses",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"whitelistCounter",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"}]},659:function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"d",function(){return s}),a.d(t,"c",function(){return r}),a.d(t,"b",function(){return i});var n="0x8180F8836BF47970225Fe96C1c2FBef6697B3223",s="0x0f5d2fb29fb7d3cfee444a200298f468908cc942",r="0xf87e31492faf9a91b02ee0deaad50d51d56d5d4d",i="0x46fbCfd32eA671CAa21897C09072CB6cb44C0bc9"},660:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},r.apply(this,arguments)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,a){return t&&o(e.prototype,t),a&&o(e,a),e}function u(e,t){return!t||"object"!==s(t)&&"function"!==typeof t?d(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var m=n(a(3)),f=n(a(1)),h=a(661),b={thousandSeparator:m.default.oneOfType([m.default.string,m.default.oneOf([!0])]),decimalSeparator:m.default.string,decimalScale:m.default.number,fixedDecimalScale:m.default.bool,displayType:m.default.oneOf(["input","text"]),prefix:m.default.string,suffix:m.default.string,format:m.default.oneOfType([m.default.string,m.default.func]),removeFormatting:m.default.func,mask:m.default.oneOfType([m.default.string,m.default.arrayOf(m.default.string)]),value:m.default.oneOfType([m.default.number,m.default.string]),isNumericString:m.default.bool,customInput:m.default.func,allowNegative:m.default.bool,allowEmptyFormatting:m.default.bool,onValueChange:m.default.func,onKeyDown:m.default.func,onMouseUp:m.default.func,onChange:m.default.func,onFocus:m.default.func,onBlur:m.default.func,type:m.default.oneOf(["text","tel"]),isAllowed:m.default.func,renderText:m.default.func,getInputRef:m.default.func},g={displayType:"input",decimalSeparator:".",fixedDecimalScale:!1,prefix:"",suffix:"",allowNegative:!0,allowEmptyFormatting:!1,isNumericString:!1,type:"text",onValueChange:h.noop,onChange:h.noop,onKeyDown:h.noop,onMouseUp:h.noop,onFocus:h.noop,onBlur:h.noop,isAllowed:h.returnTrue,getInputRef:h.noop},v=function(e){function t(e){var a;i(this,t),a=u(this,c(t).call(this,e)),a.validateProps();var n=a.formatValueProp();return a.state={value:n,numAsString:a.removeFormatting(n)},a.selectionBeforeInput={selectionStart:0,selectionEnd:0},a.onChange=a.onChange.bind(d(d(a))),a.onKeyDown=a.onKeyDown.bind(d(d(a))),a.onMouseUp=a.onMouseUp.bind(d(d(a))),a.onFocus=a.onFocus.bind(d(d(a))),a.onBlur=a.onBlur.bind(d(d(a))),a}return p(t,e),l(t,[{key:"componentDidUpdate",value:function(e){this.updateValueIfRequired(e)}},{key:"updateValueIfRequired",value:function(e){var t=this.props,a=this.state;if(e!==t){this.validateProps();var n=a.value,s=a.numAsString||"",r=this.formatNumString(s),i=void 0===t.value?r:this.formatValueProp(),o=this.removeFormatting(i),l=parseFloat(o),u=parseFloat(s);(isNaN(l)&&isNaN(u)||l===u)&&r===n||this.setState({value:i,numAsString:o})}}},{key:"getFloatString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.props.decimalScale,a=this.getSeparators(),n=a.decimalSeparator,s=this.getNumberRegex(!0),r="-"===e[0];r&&(e=e.replace("-","")),n&&0===t&&(e=e.split(n)[0]),e=(e.match(s)||[]).join("").replace(n,".");var i=e.indexOf(".");return-1!==i&&(e="".concat(e.substring(0,i),".").concat(e.substring(i+1,e.length).replace(new RegExp((0,h.escapeRegExp)(n),"g"),""))),r&&(e="-"+e),e}},{key:"getNumberRegex",value:function(e,t){var a=this.props,n=a.format,s=a.decimalScale,r=this.getSeparators(),i=r.decimalSeparator;return new RegExp("\\d"+(!i||0===s||t||n?"":"|"+(0,h.escapeRegExp)(i)),e?"g":void 0)}},{key:"getSeparators",value:function(){var e=this.props.decimalSeparator,t=this.props.thousandSeparator;return!0===t&&(t=","),{decimalSeparator:e,thousandSeparator:t}}},{key:"getMaskAtIndex",value:function(e){var t=this.props.mask,a=void 0===t?" ":t;return"string"===typeof a?a:a[e]||" "}},{key:"getValueObject",value:function(e,t){var a=parseFloat(t);return{formattedValue:e,value:t,floatValue:isNaN(a)?void 0:a}}},{key:"validateProps",value:function(){var e=this.props.mask,t=this.getSeparators(),a=t.decimalSeparator,n=t.thousandSeparator;if(a===n)throw new Error("\n          Decimal separator can't be same as thousand separator.\n          thousandSeparator: ".concat(n,' (thousandSeparator = {true} is same as thousandSeparator = ",")\n          decimalSeparator: ').concat(a," (default value for decimalSeparator is .)\n       "));if(e){if(("string"===e?e:e.toString()).match(/\d/g))throw new Error("\n          Mask ".concat(e," should not contain numeric character;\n        "))}}},{key:"setPatchedCaretPosition",value:function(e,t,a){(0,h.setCaretPosition)(e,t),setTimeout(function(){e.value===a&&(0,h.setCaretPosition)(e,t)},0)}},{key:"correctCaretPosition",value:function(e,t,a){var n=this.props,s=n.prefix,r=n.suffix,i=n.format;if(""===e)return 0;if(t=(0,h.clamp)(t,0,e.length),!i){var o="-"===e[0];return(0,h.clamp)(t,s.length+(o?1:0),e.length-r.length)}if("function"===typeof i)return t;if("#"===i[t]&&(0,h.charIsNumber)(e[t]))return t;if("#"===i[t-1]&&(0,h.charIsNumber)(e[t-1]))return t;var l=i.indexOf("#"),u=i.lastIndexOf("#");t=(0,h.clamp)(t,l,u+1);for(var c=i.substring(t,i.length).indexOf("#"),p=t,y=t+(-1===c?0:c);p>l&&("#"!==i[p]||!(0,h.charIsNumber)(e[p]));)p-=1;return!(0,h.charIsNumber)(e[y])||"left"===a&&t!==l||t-p<y-t?(0,h.charIsNumber)(e[p])?p+1:p:y}},{key:"getCaretPosition",value:function(e,t,a){var n,s,r=this.props.format,i=this.state.value,o=this.getNumberRegex(!0),l=(e.match(o)||[]).join(""),u=(t.match(o)||[]).join("");for(n=0,s=0;s<a;s++){var c=e[s]||"",p=t[n]||"";if((c.match(o)||c===p)&&("0"!==c||!p.match(o)||"0"===p||l.length===u.length)){for(;c!==t[n]&&n<t.length;)n++;n++}}return"string"!==typeof r||i||(n=t.length),n=this.correctCaretPosition(t,n)}},{key:"removePrefixAndSuffix",value:function(e){var t=this.props,a=t.format,n=t.prefix,s=t.suffix;if(!a&&e){var r="-"===e[0];r&&(e=e.substring(1,e.length)),e=n&&0===e.indexOf(n)?e.substring(n.length,e.length):e;var i=e.lastIndexOf(s);e=s&&-1!==i&&i===e.length-s.length?e.substring(0,i):e,r&&(e="-"+e)}return e}},{key:"removePatternFormatting",value:function(e){for(var t=this.props.format,a=t.split("#").filter(function(e){return""!==e}),n=0,s="",r=0,i=a.length;r<=i;r++){var o=a[r]||"",l=r===i?e.length:e.indexOf(o,n);if(-1===l){s=e;break}s+=e.substring(n,l),n=l+o.length}return(s.match(/\d/g)||[]).join("")}},{key:"removeFormatting",value:function(e){var t=this.props,a=t.format,n=t.removeFormatting;return e?(a?e="string"===typeof a?this.removePatternFormatting(e):"function"===typeof n?n(e):(e.match(/\d/g)||[]).join(""):(e=this.removePrefixAndSuffix(e),e=this.getFloatString(e)),e):e}},{key:"formatWithPattern",value:function(e){for(var t=this.props.format,a=0,n=t.split(""),s=0,r=t.length;s<r;s++)"#"===t[s]&&(n[s]=e[a]||this.getMaskAtIndex(a),a+=1);return n.join("")}},{key:"formatAsNumber",value:function(e){var t=this.props,a=t.decimalScale,n=t.fixedDecimalScale,s=t.prefix,r=t.suffix,i=t.allowNegative,o=this.getSeparators(),l=o.thousandSeparator,u=o.decimalSeparator,c=-1!==e.indexOf(".")||a&&n,p=(0,h.splitDecimal)(e,i),y=p.beforeDecimal,d=p.afterDecimal,m=p.addNegation;return void 0!==a&&(d=(0,h.limitToScale)(d,a,n)),l&&(y=y.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+l)),s&&(y=s+y),r&&(d+=r),m&&(y="-"+y),e=y+(c&&u||"")+d}},{key:"formatNumString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.props,a=t.format,n=t.allowEmptyFormatting,s=e;return""!==e||n?"-"!==e||a?s="string"===typeof a?this.formatWithPattern(s):"function"===typeof a?a(s):this.formatAsNumber(s):(s="-",e=""):s="",s}},{key:"formatValueProp",value:function(){var e=this.props,t=e.format,a=e.decimalScale,n=e.fixedDecimalScale,s=e.allowEmptyFormatting,r=this.props,i=r.value,o=r.isNumericString,l=!i&&0!==i;return l&&s&&(i=""),l&&!s?"":("number"===typeof i&&(i=i.toString(),o=!0),o&&!t&&"number"===typeof a&&(i=(0,h.roundToPrecision)(i,a,n)),o?this.formatNumString(i):this.formatInput(i))}},{key:"formatNegation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.props.allowNegative,a=new RegExp("(-)"),n=new RegExp("(-)(.)*(-)"),s=a.test(e),r=n.test(e);return e=e.replace(/-/g,""),s&&!r&&t&&(e="-"+e),e}},{key:"formatInput",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.props.format||(e=this.formatNegation(e)),e=this.removeFormatting(e),this.formatNumString(e)}},{key:"isCharacterAFormat",value:function(e,t){var a=this.props,n=a.format,s=a.prefix,r=a.suffix,i=a.decimalScale,o=a.fixedDecimalScale,l=this.getSeparators(),u=l.decimalSeparator;return"string"===typeof n&&"#"!==n[e]||!(n||!(e<s.length||e>=t.length-r.length||i&&o&&t[e]===u))}},{key:"checkIfFormatGotDeleted",value:function(e,t,a){for(var n=e;n<t;n++)if(this.isCharacterAFormat(n,a))return!0;return!1}},{key:"correctInputValue",value:function(e,t,a){var n=this.props,s=n.format,r=n.decimalSeparator,i=n.allowNegative,o=n.prefix,l=n.suffix,u=this.state.numAsString||"",c=this.selectionBeforeInput,p=c.selectionStart,y=c.selectionEnd,d=(0,h.findChangedIndex)(t,a),m=d.start,f=d.end,b=s?0:o.length,g=t.length-(s?0:l.length);if(a.length>t.length||!a.length||m===f||0===p&&y===t.length||p===b&&y===g)return a;if(this.checkIfFormatGotDeleted(m,f,t)&&(a=t),!s){var v=this.removeFormatting(a),w=(0,h.splitDecimal)(v,i),E=w.beforeDecimal,x=w.afterDecimal,P=w.addNegation,k=e<a.indexOf(r)+1;if(v.length<u.length&&k&&""===E&&!parseFloat(x))return P?"-":""}return a}},{key:"onChange",value:function(e){e.persist();var t=e.target,a=t.value,n=this.state,s=this.props,r=s.isAllowed,i=n.value||"",o=Math.max(t.selectionStart,t.selectionEnd);a=this.correctInputValue(o,i,a);var l=this.formatInput(a)||"",u=this.removeFormatting(l),c=this.getValueObject(l,u);r(c)||(l=i),t.value=l;var p=this.getCaretPosition(a,l,o);this.setPatchedCaretPosition(t,p,l),l!==i?this.setState({value:l,numAsString:u},function(){s.onValueChange(c,e),s.onChange(e)}):s.onChange(e)}},{key:"onBlur",value:function(e){var t=this,a=this.props,n=this.state,s=a.format,r=a.onBlur,i=n.numAsString,o=n.value;if(!s){i=(0,h.fixLeadingZero)(i);var l=this.formatNumString(i);if(l!==o)return e.persist(),void this.setState({value:l,numAsString:i},function(){var n=t.getValueObject(l,i);a.onValueChange(n,e),r(e)})}r(e)}},{key:"onKeyDown",value:function(e){var t,a=this,n=e.target,s=e.key,r=n.selectionStart,i=n.selectionEnd,o=n.value,l=void 0===o?"":o,u=this.props,c=u.decimalScale,p=u.fixedDecimalScale,y=u.prefix,d=u.suffix,m=u.format,f=u.onKeyDown,h=u.onValueChange,b=void 0!==c&&p,g=this.getNumberRegex(!1,b),v=new RegExp("-"),w="string"===typeof m;if(this.selectionBeforeInput={selectionStart:r,selectionEnd:i},"ArrowLeft"===s||"Backspace"===s?t=r-1:"ArrowRight"===s?t=r+1:"Delete"===s&&(t=r),void 0===t||r!==i)return void f(e);var E=t,x=w?m.indexOf("#"):y.length,P=w?m.lastIndexOf("#")+1:l.length-d.length;if("ArrowLeft"===s||"ArrowRight"===s){var k="ArrowLeft"===s?"left":"right";E=this.correctCaretPosition(l,t,k)}else if("Delete"!==s||g.test(l[t])||v.test(l[t])){if("Backspace"===s&&!g.test(l[t]))if(r<=x+1&&"-"===l[0]&&"undefined"===typeof m){var M=l.substring(1),A=this.removeFormatting(M),S=this.getValueObject(M,A);e.persist(),this.setState({value:M,numAsString:A},function(){a.setPatchedCaretPosition(n,E,M),h(S,e)})}else if(!v.test(l[t])){for(;!g.test(l[E-1])&&E>x;)E--;E=this.correctCaretPosition(l,E,"left")}}else for(;!g.test(l[E])&&E<P;)E++;(E!==t||t<x||t>P)&&(e.preventDefault(),this.setPatchedCaretPosition(n,E,l)),e.isUnitTestRun&&this.setPatchedCaretPosition(n,E,l),this.props.onKeyDown(e)}},{key:"onMouseUp",value:function(e){var t=e.target,a=t.selectionStart,n=t.selectionEnd,s=t.value,r=void 0===s?"":s;if(a===n){var i=this.correctCaretPosition(r,a);i!==a&&this.setPatchedCaretPosition(t,i,r)}this.props.onMouseUp(e)}},{key:"onFocus",value:function(e){var t=this;e.persist(),setTimeout(function(){var a=e.target,n=a.selectionStart,s=a.selectionEnd,r=a.value,i=void 0===r?"":r,o=t.correctCaretPosition(i,n);o===n||0===n&&s===i.length||t.setPatchedCaretPosition(a,o,i),t.props.onFocus(e)},0)}},{key:"render",value:function(){var e=this.props,t=e.type,a=e.displayType,n=e.customInput,s=e.renderText,i=e.getInputRef,o=this.state.value,l=(0,h.omit)(this.props,b),u=r({},l,{type:t,value:o,onChange:this.onChange,onKeyDown:this.onKeyDown,onMouseUp:this.onMouseUp,onFocus:this.onFocus,onBlur:this.onBlur});if("text"===a)return s?s(o)||null:f.default.createElement("span",r({},l,{ref:i}),o);if(n){var c=n;return f.default.createElement(c,u)}return f.default.createElement("input",r({},u,{ref:i}))}}]),t}(f.default.Component);v.propTypes=b,v.defaultProps=g;var w=v;t.default=w,e.exports=t.default},661:function(e,t,a){"use strict";function n(){}function s(){return!0}function r(e){return!!(e||"").match(/\d/)}function i(e){return e.replace(/[-[\]\/{}()*+?.\\^$|]/g,"\\$&")}function o(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a="-"===e[0],n=a&&t;e=e.replace("-","");var s=e.split(".");return{beforeDecimal:s[0],afterDecimal:s[1]||"",hasNagation:a,addNegation:n}}function l(e){if(!e)return e;var t="-"===e[0];t&&(e=e.substring(1,e.length));var a=e.split("."),n=a[0].replace(/^0+/,"")||"0",s=a[1]||"";return"".concat(t?"-":"").concat(n).concat(s?".".concat(s):"")}function u(e,t,a){for(var n="",s=a?"0":"",r=0;r<=t-1;r++)n+=e[r]||s;return n}function c(e,t,a){if(-1!==["","-"].indexOf(e))return e;var n=-1!==e.indexOf(".")&&t,s=o(e),r=s.beforeDecimal,i=s.afterDecimal,l=s.hasNagation,c=parseFloat("0.".concat(i||"0")).toFixed(t).split("."),p=r.split("").reverse().reduce(function(e,t,a){return e.length>a?(Number(e[0])+Number(t)).toString()+e.substring(1,e.length):t+e},c[0]),y=u(c[1]||"",Math.min(t,i.length),a),d=l?"-":"",m=n?".":"";return"".concat(d).concat(p).concat(m).concat(y)}function p(e,t){var a={};return Object.keys(e).forEach(function(n){t[n]||(a[n]=e[n])}),a}function y(e,t){if(e.value=e.value,null!==e){if(e.createTextRange){var a=e.createTextRange();return a.move("character",t),a.select(),!0}return e.selectionStart||0===e.selectionStart?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}function d(e,t){for(var a=0,n=0,s=e.length,r=t.length;e[a]===t[a]&&a<s;)a++;for(;e[s-1-n]===t[r-1-n]&&r-n>a&&s-n>a;)n++;return{start:a,end:s-n}}function m(e,t,a){return Math.min(Math.max(e,t),a)}Object.defineProperty(t,"__esModule",{value:!0}),t.noop=n,t.returnTrue=s,t.charIsNumber=r,t.escapeRegExp=i,t.splitDecimal=o,t.fixLeadingZero=l,t.limitToScale=u,t.roundToPrecision=c,t.omit=p,t.setCaretPosition=y,t.findChangedIndex=d,t.clamp=m}});
//# sourceMappingURL=2.b4beaffc.chunk.js.map